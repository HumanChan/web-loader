1.产品目标
    这是一个基于 Electron 的桌面应用。用于访问目标网页，并将会话期间加载的所有资源一次性导出至本地目录，面向常见 H5 游戏资源抓取与归档场景。

2.窗口与布局（满足网页显示区 720×1280 比例）
    ① 窗口尺寸：1080x1380（宽x高）。
    ② 左上 URL 输入区：720x100，包含 URL 输入框与“确定”按钮。
    ③ 左侧网页显示区：720x1280，内置浏览器固定显示区域（严格 720 宽 x 1280 高，不随窗口缩放变形）。
    ④ 右侧控制面板：360x1380，包含导出与路径设置、捕获控制、筛选搜索、资源列表与状态统计。
    ⑤ 窗口水平可拉伸以扩展右侧面板（最小 360 宽），垂直高度固定以保证 1280 高度的显示区有效呈现。

3.核心流程与状态
    ① 输入 URL → 点击“确定”：触发页面导航，并从该时刻开始全程捕获资源；计时器开始计时。
    ② 捕获状态机：Idle → Capturing → Paused → Capturing → Exporting → Idle。
    ③ 暂停：暂停新资源写入与计时器；继续：恢复捕获与计时；停止：结束本次会话捕获（不导出）。
    ④ 导出：点击“导出”执行全量导出（自“确定”起至导出前的全部已捕获资源）；导出完成后计时器重置，会话回到 Idle。
    ⑤ 不需要滚动触发懒加载（以页面自然加载的资源为准）。

4.资源范围（纳入/排除）
    ① 纳入：HTML、CSS、JavaScript、图片（png/jpg/webp/gif/svg 等）、字体（woff/woff2/ttf/otf 等）、音频（mp3/m4a/ogg 等）、JSON 等 H5 常用资源。
    ② 排除：WASM、HLS/DASH 等媒体分片流（本版本不纳入）。
    ③ 说明：data:/blob: 等内存态资源不保证导出；DRM/EME、加密媒体可能无法导出为可用文件。

5.右侧控制面板功能
    ① 导出与路径：导出按钮；导出目标路径选择（记住上次选择）。
    ② 捕获控制：暂停/继续/停止抓取；计时器显示。
    ③ 资源列表：名称/URL（可展开）、类型、域名、大小、状态（进行中/成功/失败/已跳过）、首次/最后时间；
       支持关键字搜索（命中 URL/文件名/MIME）、按类型与域名多选过滤、排序（时间/大小/类型/域名/路径）。
    ④ 进度与统计：导出进度条与统计（总数、成功数、失败数、总大小，实时刷新）；失败项提示与手动重试入口。
    ⑤ 导出模式：全量模式（不提供“仅选中项导出”）。

6.计时器逻辑
    每次点击“确定”跳转网页后开始计时；点击“导出”后计时器重置；暂停时计时器暂停，继续时恢复。

7.导出目录与命名规则
    ① 根目录：以主文档 HTML 所在目录作为导出根（以页面主文档 URL 的路径层级为参照）。
    ② 存储规则：按原始 URL 路径层级落盘为相对路径；主域资源直接按路径落地；第三方域名资源置于 external/<host>/... 目录下，避免与主域冲突。
    ③ 查询串规则：对规范化后的查询串（参数键名排序并标准化编码）计算短哈希，作为文件名后缀追加在扩展名前（示例：/assets/main.js?ver=123&lang=zh → /assets/main.__q_ab12cd34.js）；片段标识（#...）不参与归一化。
    ④ 去重策略：仅以 URL 归一化为准（不做内容哈希对比）。

8.捕获与写盘策略
    ① 从“确定”开始绑定网络拦截（基于 Electron session.webRequest），实时捕获并写入临时目录，同时维护索引（URL → 本地路径、MIME、大小、时间、状态）。
    ② 导出时将临时目录中本会话的资源整理复制到目标导出目录，遵循上述目录与命名规则；失败项在列表中展示，可手动重试；失败不阻断整体导出。
    ③ 并发抓取与写盘限流建议 4–8；UI 统计 200–500ms 节流刷新。

9.设置与持久化
    ① 持久化项：导出路径、默认过滤与排序、窗口与分栏尺寸、并发/节流参数、是否在启动时清理上次会话临时文件等。
    ② 持久化方式：本地存储（如 electron-store），随版本可做迁移。

10.性能与稳定性
    ① 对超大单文件或总量超限给出提示；捕获与导出互不阻塞 UI。
    ② 资源记录与导出过程具备可恢复性（异常退出不丢统计与已抓取文件）。

11.非功能与边界
    ① 不需要考虑认证与会话登录、Cookie 注入等。
    ② 不需要合法合规与免责声明展示。
    ③ 加密/受保护媒体、内存合成资源等不保证可导出为可用文件。

12.补充说明
    ① 视口尺寸只需遵循上述比例约束；本版本采用 1080x1380 窗口、720x100 URL 区、720x1280 网页显示区、右侧 360 宽控制面板。
    ② 后续如需更宽右栏（如 1200x1380 窗口、右栏 480 宽），可在设置中提供开关或后续版本调整。